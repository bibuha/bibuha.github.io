<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rich Bot - Telegram & RichAds</title>

    <!-- Telegram WebApp & RichAds SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://richinfo.co/richpartners/telegram/js/tg-ob.js"></script>

  <style>
  body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to right, #4e54c8, #8f94fb);
            color: #fff;
            text-align: center;
            padding: 20px;
            margin: 0;
        }

        h1 {
            font-size: 2em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .button-container {
            margin: 20px 0;
        }

        .ad-button {
            padding: 15px 30px;
            font-size: 18px;
            color: white;
            background: linear-gradient(45deg, #ff416c, #ff4b2b);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;            
            display: block;
            margin: 10px auto;
        }

        .ad-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.5);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        #notification {
            margin-top: 20px;
            padding: 10px;
            display: none;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.5);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }
    @keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

.fade-out {
    animation: fadeOut 1s forwards;
}
    .popup {
    position: fixed;
    top: 30%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #4CAF50, #2E8B57);
    color: white;
    padding: 20px 30px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 9999;
    text-align: center;
    display: none;
}

.popup button {
    background: #ffffff;
    color: #2E8B57;
    padding: 8px 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 10px;
}

        #userInfo {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        #bannerAd {
    margin: 30px auto; /* Memberikan jarak 30px di bagian atas dan bawah, serta memusatkan banner secara horizontal */
    width: 100%; /* Membuat lebar banner sebesar 100% dari lebar parent container */
    height: 100px; /* Menentukan tinggi banner menjadi 250px */
    background: rgba(0, 0, 0, 0.2); /* Memberikan warna latar belakang hitam dengan transparansi 20% */
    border-radius: 10px; /* Membuat sudut banner menjadi membulat dengan radius 10px */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); /* Memberikan efek bayangan di sekitar banner (X: 0, Y: 4px, Blur: 8px, Transparansi: 40%) */
    display: flex; /* Mengatur banner menggunakan flexbox agar mudah dalam pengaturan isi (content) */
    align-items: center; /* Memusatkan konten secara vertikal di tengah banner */
    justify-content: center; /* Memusatkan konten secara horizontal di tengah banner */
}
    
     #withdrawForm, #historySection {
            display: none;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin-top: 20px;
        }

        input, button {
            margin: 10px;
            padding: 10px;
            border-radius: 5px;
        }
    /* Gaya Notifikasi booster*/
.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #4CAF50;
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    z-index: 9999;
}
    /* Gaya Tombol booster */
.ad-button {
    padding: 10px 20px;
    font-size: 18px;
    background: #ff4757;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.ad-button:disabled {
    background: #888888;
    cursor: not-allowed;
}
  </style>
<body>
  <h1>âœ¨ Rich Bot v4.0 âœ¨</h1>
    
    <!-- Banner Ad (Embedded) -->
    <div id="bannerAd">Iklan sedang dimuat...</div>
  
   <!-- akun -->
    <div id="userInfo">Memuat data Telegram...</div>
  
   <!-- pendapatan dan jumlah tonton -->
     <p><strong>ğŸ’° Saldo:</strong> Rp.<span id="balance">0</span></p>
    <p><strong>ğŸ¥ Tontonan:</strong> <span id="views">0</span>/25</p>
    
  <!-- notikasi muncul -->
     <div id="notification"></div>
     <div id="welcomePopup" class="popup">
    âœ… Selamat datang kembali di Rich Bot!
    <button onclick="closePopup()">Oke</button>
</div>

    <!-- Tombol Iklan -->
    <div class="button-container">
        <button class="ad-button" id="adButton" onclick="tontonIklan()">ğŸ¥Tonton Iklan Rp.10ğŸ¥</button>
    </div>
  
    <!-- tombol penarikan -->
     <button class="ad-button" onclick="toggleWithdrawForm()">ğŸ’¸ Cairkan Saldo</button>
  
       <!-- Form Penarikan -->
    <div id="withdrawForm">
        <h3>ğŸ’¸ Form Penarikan</h3>
        <input type="text" id="namaDANA" placeholder="Nama DANA">
        <input type="text" id="noDANA" placeholder="Nomor DANA (10-13 digit)">
        <input type="number" id="amount" placeholder="Jumlah (Min Rp.1000, kelipatan Rp.1000)">
        <button onclick="withdraw()">âœ… Tarik Saldo</button>
    </div>
        <button class="ad-button" onclick="toggleHistory()">ğŸ“œ Riwayat Penarikan</button>
    </div>    

    <!-- Riwayat Penarikan -->
    <div id="historySection">
        <h3>ğŸ“œ Riwayat Penarikan</h3>
        <div id="historyList">Belum ada riwayat.</div>
    <!-- Notifikasi -->
              
            
<script>
    document.getElementById('adButton').addEventListener('click', tontonIklan);
</script>
</body>
      <script> // Fungsi Penyimpanan dengan Prefix v4_
function saveToStorage(key, value) {
    localStorage.setItem(`v4_${key}`, JSON.stringify(value));
    console.log(`âœ… Disimpan: v4_${key} =`, value);
}

function getFromStorage(key) {
    const value = localStorage.getItem(`v4_${key}`);
    console.log(`ğŸ“¤ Diambil: v4_${key} =`, value);
    return value ? JSON.parse(value) : 0;  // Pastikan default 0 jika tidak ada data
}
      // Inisialisasi Telegram WebApp
let telegramUser = {};

function initTelegramWebApp() {
    if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();
        const user = Telegram.WebApp.initDataUnsafe?.user;

        if (user) {
            telegramUser = user;
            saveToStorage('user', user);
            displayUserInfo(user);
            console.log("âœ… Data Pengguna:", user);
        } else {
            console.warn("âš ï¸ Data Telegram tidak ditemukan.");
            showNotification("âš ï¸ Gagal memuat data Telegram.");
        }
    } else {
        console.error("âŒ Telegram WebApp tidak tersedia.");
        showNotification("âŒ Telegram WebApp tidak tersedia.");
    }
}

// Tampilkan Info Pengguna Telegram
function displayUserInfo(user) {
    const userInfo = document.getElementById('userInfo');
    userInfo.innerHTML = `
        <p><strong>ğŸ‘¤ Nama:</strong> ${user.first_name || 'Tidak ada'}</p>
        <p><strong>ğŸ“› Username:</strong> ${user.username || 'Tidak ada'}</p>
        <p><strong>ğŸ†” ID:</strong> ${user.id || 'Tidak ada'}</p>
    `;
}

      // Inisialisasi Telegram Ads
function initTelegramAds() {
    if (typeof TelegramAdsController !== "undefined") {
        window.TelegramAdsController = new TelegramAdsController();
        window.TelegramAdsController.initialize({
            pubId: "963391",
            appId: "1707"
        });
    } else {
        console.error("âŒ TelegramAdsController tidak tersedia.");
    }
}
        // Menampilkan Embedded Banner
function showBanner() {
    const bannerContainer = document.getElementById('bannerAd');

    if (window.TelegramAdsController) {
        window.TelegramAdsController.showBanner(bannerContainer, {
            onLoad: function() {
                bannerContainer.innerHTML = ''; // Hapus teks "Iklan sedang dimuat..."
            },
            onError: function() {
                bannerContainer.innerHTML = 'âŒ Gagal memuat banner.';
                console.error("âŒ Gagal memuat banner.");
            }
        });
    } else {
        bannerContainer.innerHTML = 'âŒ Banner tidak tersedia.';
    }
}
      let isAdPlaying = false; // Status iklan sedang berjalan
let adsWatched = 0;      // Jumlah iklan yang ditonton
let dailyLimit = 25;     // Batas maksimal tonton iklan per hari
let rewardPerAd = 10;    // Reward per iklan

// Fungsi Menampilkan Iklan Booster
function showTelegramAd() {
    if (isAdPlaying) {
        showNotification("â³ Iklan sedang berjalan...");
        return; // Mencegah pemanggilan ulang saat iklan aktif
    }

    // Validasi koneksi internet
    if (!navigator.onLine) {
        showNotification("âš ï¸ Tidak ada koneksi internet!");
        return;
    }

    // Ambil data dari localStorage dengan prefix v4_
    let adsWatchedToday = getFromStorage('v4_adsWatchedToday') || 0; // Jumlah iklan yang ditonton hari ini

    // Validasi batas maksimal iklan (25 kali per hari)
    if (adsWatchedToday >= dailyLimit) {
        showNotification("âŒ Limit iklan hari ini tercapai!");
        return;
    }

    // Validasi ketersediaan TelegramAdsController
    if (window.TelegramAdsController && typeof window.TelegramAdsController.showAd === 'function') {
        isAdPlaying = true; // Set status iklan sedang berjalan

        try {
            // Tampilkan iklan Telegram
            window.TelegramAdsController.showAd()
                .then(() => {
                    // Jika iklan berhasil ditampilkan, update data
                    adsWatchedToday++;
                    saveToStorage('v4_adsWatchedToday', adsWatchedToday);

                    // Perbarui UI setelah iklan
                    updateAdsUI(adsWatchedToday);

                    // Berikan reward per iklan
                    giveReward(rewardPerAd);
                    showNotification(`âœ… Anda mendapatkan ${rewardPerAd} rupiah!`);

                    // Nonaktifkan tombol selama 60 detik (dengan countdown)
                    disableAdButtonWithCountdown();
                })
                .catch(() => {
                    showNotification("âš ï¸ Iklan gagal dimuat. Coba lagi nanti.");
                })
                .finally(() => {
                    isAdPlaying = false; // Reset status setelah selesai
                });
        } catch (error) {
            isAdPlaying = false; // Pastikan reset jika terjadi error
            showNotification("âŒ Terjadi kesalahan saat memuat iklan.");
        }
    } else {
        showNotification("âŒ Iklan tidak tersedia saat ini.");
    }
}

// Fungsi Nonaktifkan Tombol Iklan dengan Countdown
function disableAdButtonWithCountdown() {
    const button = document.getElementById('adButton'); // Perbaikan id tombol
    if (!button) return;

    let countdown = 60; // Waktu hitung mundur dalam detik
    button.disabled = true;

    const interval = setInterval(() => {
        button.textContent = `â³ Tunggu ${countdown}s`;
        countdown--;

        if (countdown < 0) {
            clearInterval(interval);
            button.textContent = "ğŸš€ Tonton Iklan Booster";
            button.disabled = false; // Aktifkan kembali tombol
        }
    }, 1000);
}

// Fungsi Menyimpan Data di localStorage dengan prefix v4_
function saveToStorage(key, value) {
    localStorage.setItem('v4_' + key, JSON.stringify(value));
}

// Fungsi Mengambil Data dari localStorage dengan prefix v4_
function getFromStorage(key) {
    return JSON.parse(localStorage.getItem('v4_' + key));
}

// Fungsi Perbarui Tampilan Iklan di UI
function updateAdsUI(adsWatchedToday) {
    document.getElementById('adsWatched').textContent = `${adsWatchedToday}/${dailyLimit}`;
}

// Fungsi Memberikan Reward
function giveReward(amount) {
    // Tambahkan reward ke saldo
    let balance = getFromStorage('v4_balance') || 0;
    balance += amount;
    saveToStorage('v4_balance', balance);
    document.getElementById('balance').textContent = `Saldo: ${balance} rupiah`;
}

// Reset Otomatis setiap 00:00
function resetDailyAdsLimit() {
    const lastReset = getFromStorage('v4_lastReset') || new Date().toDateString();
    const today = new Date().toDateString();

    if (lastReset !== today) {
        saveToStorage('v4_adsWatchedToday', 0);
        saveToStorage('v4_lastReset', today);
        updateAdsUI(0);
    }
}

// Menampilkan Notifikasi Dinamis
function showNotification(message) {
    const notification = document.getElementById('notification');
    notification.innerHTML = message;
    notification.style.display = 'block';
    setTimeout(() => {
        notification.classList.add('fade-out');
        setTimeout(() => {
            notification.style.display = 'none';
            notification.classList.remove('fade-out'); // Reset animasi
        }, 1000); // Sinkron dengan durasi animasi
    }, 5000); // Notifikasi menghilang setelah 5 detik
}

// Panggil fungsi reset harian saat halaman dimuat
resetDailyAdsLimit();
          
        function toggleWithdrawForm() {
    const withdrawForm = document.getElementById("withdrawForm");
    // Toggle visibilitas form penarikan
    if (withdrawForm.style.display === "none" || withdrawForm.style.display === "") {
        withdrawForm.style.display = "block";
    } else {
        withdrawForm.style.display = "none";
    }
}
      function toggleHistory() {
    const historySection = document.getElementById("historySection");
    // Toggle visibilitas riwayat penarikan
    if (historySection.style.display === "none" || historySection.style.display === "") {
        historySection.style.display = "block";
    } else {
        historySection.style.display = "none";
    }
}
        
// Tampilkan/Sembunyikan Form Penarikan
function withdraw() {
    const namaDANA = document.getElementById('namaDANA').value.trim();
    const noDANA = document.getElementById('noDANA').value.trim();
    const amount = parseInt(document.getElementById('amount').value, 10);
    const balance = getFromStorage('balance');
    
    // Ambil data pengguna (nama, username, ID Telegram)
    const namaUser = getFromStorage('namaUser') || 'Tidak Diketahui';
    const username = getFromStorage('username') || 'Tidak Ada';
    const userID = getFromStorage('userID') || 'rcbt';

    // Validasi Input
    if (namaDANA.length < 3) {
        showNotification("âŒ Nama DANA minimal 3 karakter!");
        return;
    }
    if (!/^\d{10,13}$/.test(noDANA)) {
        showNotification("âŒ Nomor DANA harus 10-13 digit!");
        return;
    }
    if (amount < 1000 || amount % 1000 !== 0) {
        showNotification("âŒ Minimal Rp.1000 dan kelipatan Rp.1000!");
        return;
    }
    if (amount > balance) {
        showNotification("âŒ Saldo tidak mencukupi!");
        return;
    }

    // Konfirmasi penarikan
    if (!confirm(`Konfirmasi Penarikan\nJumlah: Rp.${amount.toLocaleString()}\nNama DANA: ${namaDANA}\nNomor DANA: ${noDANA}`)) {
        return;
    }

    // Proses pengurangan saldo
    const newBalance = balance - amount;
    saveToStorage('balance', newBalance);
    saveToStorage('lastWithdrawDate', new Date().toLocaleDateString('id-ID'));

    // Simpan riwayat penarikan
    saveWithdrawHistory(namaDANA, noDANA, amount, namaUser, username, userID, newBalance);

    // Tampilkan notifikasi berhasil
    showNotification(`âœ… Penarikan Rp.${amount.toLocaleString()} berhasil!`);
    document.getElementById('withdrawForm').reset();
    updateBalanceUI();
}
      // Fungsi menyimpan riwayat penarikan
function saveWithdrawHistory(namaDANA, noDANA, amount, namaUser, username, userID, newBalance) {
    const history = getFromStorage('withdrawHistory') || [];
    const timestamp = new Date();
    const newRecord = {
        namaDANA,
        noDANA,
        amount,
        namaUser,
        username,
        userID,
        sisaSaldo: newBalance,
        status: 'âœ… Berhasil',
        date: timestamp.toLocaleString('id-ID'),
    };
    history.push(newRecord);
    saveToStorage('withdrawHistory', history);
    updateWithdrawHistoryUI();

    // Kirim riwayat ke channel Telegram
    sendToTelegram(newRecord);
}

// Fungsi memperbarui tampilan riwayat penarikan di aplikasi
function updateWithdrawHistoryUI() {
    const history = getFromStorage('withdrawHistory') || [];
    const historyContainer = document.getElementById('withdrawHistory');
    historyContainer.innerHTML = "";

    history.forEach((record) => {
        const recordHTML = `
            <div class="history-item">
                <hr>
                <p>ğŸŸ¢ <strong>Penarikan Berhasil</strong> ğŸŸ¢</p>
                <p>ğŸ’° <strong>Jumlah:</strong> Rp.${record.amount.toLocaleString()}</p>
                <p>ğŸ‘¤ <strong>Nama DANA:</strong> ${record.namaDANA}</p>
                <p>ğŸ“ <strong>No DANA:</strong> ${record.noDANA}</p>
                <p>ğŸ“Œ <strong>Nama:</strong> ${record.namaUser}</p>
                <p>ğŸ“› <strong>Username:</strong> ${record.username}</p>
                <p>ğŸ†” <strong>ID:</strong> ${record.userID}</p>
                <p>ğŸ’µ <strong>Sisa Saldo:</strong> Rp.${record.sisaSaldo.toLocaleString()}</p>
                <p>ğŸ—“ï¸ <strong>Waktu:</strong> ${record.date}</p>
                <p>ğŸš€ <strong>rcbt v.4.0</strong></p>
                <hr>
            </div>
        `;
        historyContainer.innerHTML += recordHTML;
    });
}

// Fungsi mengirim riwayat ke channel Telegram
function sendToTelegram(record) {
    const botToken = '7934521155:AAFpmSROBYB2g0kEt5wzH3KIzcTmUr-AKeo';
    const chatID = '@richbot_channel';
    const message = `
ğŸŸ¢ *Penarikan Berhasil* ğŸŸ¢

ğŸ’° Jumlah: Rp.${record.amount.toLocaleString()}
ğŸ‘¤ Nama DANA: ${record.namaDANA}
ğŸ“ No DANA: ${record.noDANA}

ğŸ“Œ Nama: ${record.namaUser}
ğŸ“› Username: ${record.username}
ğŸ†” ID: ${record.userID}

ğŸ’µ Sisa Saldo: Rp.${record.sisaSaldo.toLocaleString()}
ğŸ—“ï¸ Waktu: ${record.date}
ğŸš€ rcbt v.4.0
    `;
    fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ chat_id: chatID, text: message, parse_mode: 'Markdown' }),
    });
}
      </script>

</body>
</html>
