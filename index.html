<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rich Bot v4.0 - Telegram & RichAds</title>

    <!-- Telegram WebApp & RichAds SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js?"></script>
    
    <script src="https://js.onclckvd.com/in-stream-ad-admanager/tma.js"></script>
    <script src="https://w.tads.me/widget.js"></script>       
    <script async src="https://js.onclckmn.com/static/onclicka.js" data-admpid="306361"></script>
  <script src="https://cdn.tgads.space/assets/js/adexium-widget.min.js"></script>

    
    <style>
        body {
    font-family: 'Arial', sans-serif;
    background: linear-gradient(to right, #4e54c8, #8f94fb);
    color: #fff;
    text-align: center;
    padding: 20px;
    margin: 0;
    min-height: 100vh;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}

.main-container {
    flex: 1;
    overflow-y: auto;
    max-height: calc(100vh - 120px); /* Sesuaikan dengan kebutuhan */
    padding-bottom: 20px;
}

h1 {
    font-size: clamp(1.5em, 5vw, 2em); /* Responsif */
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    position: sticky;
    top: 0;
    background: linear-gradient(to right, #4e54c8, #8f94fb);
    padding: 10px 0;
    z-index: 10;
}

.button-container {
    margin: 20px 0;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.ad-button {
    padding: 15px 30px;
    font-size: clamp(14px, 4vw, 18px); /* Responsif */
    color: white;
    background: linear-gradient(45deg, #ff416c, #ff4b2b);
    border: none;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    margin: 0 auto;
    width: 90%;
    max-width: 300px;
}

.footer {
    position: sticky;
    bottom: 0;
    background: linear-gradient(to right, #4e54c8, #8f94fb);
    padding: 10px 0;
    z-index: 10;
}
       
/* Navbar bawah */
/* Navbar Bawah */
.bottom-navbar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-around;
    padding: 10px 5px;
    background: linear-gradient(to right, #4e54c8, #8f94fb);
    box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
    z-index: 1000;
}

.bottom-navbar .ad-button {
    padding: 8px 12px;
    font-size: 12px;
    margin: 0 3px;
    flex: 1;
    max-width: 48%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
   
}

/* Tombol Utama */
.button-container {
    margin: 15px 0;
    padding-bottom: 70px; /* Ruang untuk navbar bawah */
}

/* Responsive Adjustments */
@media (max-width: 400px) {
    .bottom-navbar .ad-button {
        font-size: 11px;
        padding: 6px 8px;
    }
    
    #info, .bonus-button {
        font-size: 14px;
    }
}

/* Form Styling */
.form-container {
    display: none;
    background-color: black;
    padding: 20px;
    border-radius: 8px;
    margin: 20px;
    margin-bottom: 80px; /* Supaya tidak ketutupan navbar */
}

.form-container input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 4px;
    border: 1px solid #ccc;
}

.form-container button {
    padding: 12px 24px;
    font-size: 16px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

/* Riwayat Penarikan Styling */
.history-container {
    display: none;
    background-color: black;
    padding: 20px;
    border-radius: 8px;
    margin: 20px;
    margin-bottom: 80px; /* Supaya tidak ketutupan navbar */
}

#historyList {
    background-color: black;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    min-height: 50px;
}

/* Show form and history on button click */
.show {
    display: block;
}
    
    #historyList {
    background-color: black;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    min-height: 50px;

    max-height: 300px;      /* batas tinggi maksimal */
    overflow-y: auto;       /* aktifkan scroll vertikal */
    scrollbar-width: thin;  /* scroll tipis (Firefox) */
}

/* Untuk scrollbar di Chrome, Edge, dll */
#historyList::-webkit-scrollbar {
    width: 8px;
}

#historyList::-webkit-scrollbar-thumb {
    background-color: #444;
    border-radius: 4px;
}

#historyList::-webkit-scrollbar-track {
    background-color: #222;
}
    
/* end navbar */
    
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            z-index: 9999;
        }

 .popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.8); /* Pusatkan dan atur scale awal */
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  padding: 20px;
  z-index: 1000;
  width: 90%;
  max-width: 320px;
  text-align: center;
  font-family: 'Segoe UI', sans-serif;
  animation: fadeZoomIn 0.6s ease forwards;
  opacity: 0;
}

/* Animasi */
@keyframes fadeZoomIn {
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1); /* Pastikan transform lengkap */
  }
}

/* Konten popup (tidak berubah) */
.popup-content {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.popup-icon {
  font-size: 40px;
  margin-bottom: 10px;
  color: #FF9800;
}

.popup h3 {
  margin: 0;
  font-size: 18px;
  color: #333;
}

.popup .brand {
  color: #4CAF50;
  font-weight: bold;
}

.popup p {
  margin: 10px 0;
  font-size: 14px;
  color: #666;
}

.popup button {
  margin-top: 15px;
  padding: 8px 16px;
  font-size: 14px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.popup button:hover {
  background-color: #45a049;
}


      
    
   .toast {
    visibility: hidden;
    min-width: 250px;
    background: rgba(0, 170, 255, 1);
    color: white;
    text-align: center;
    border-radius: 8px;
    padding: 12px 20px;
    position: fixed; /* Tetap di tengah viewport */
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    z-index: 1000;
    font-size: 16px;
    font-weight: bold;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
    box-shadow: 0 0 10px rgba(0, 170, 255, 0.6), inset 0 0 8px rgba(0, 170, 255, 0.4);
    transition: opacity 0.4s ease;
    animation: pulse 4s infinite alternate;
    opacity: 0;
}

/* Efek glow */
@keyframes pulse {
    from {
        box-shadow: 0 0 8px rgba(0, 170, 255, 0.5);
    }
    to {
        box-shadow: 0 0 15px rgba(0, 170, 255, 0.7);
    }
}

/* Saat muncul */
.toast.show {
    visibility: visible;
    opacity: 1;
}

/* Saat menghilang */
.toast.hide {
    opacity: 0;
}
    
    
    /* AD2 */
    .bonus-button {
  display: inline-block;
  background: orange;
  color: #fff;
  padding: 12px 24px;
  font-size: 18px;
  font-weight: bold;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 255, 128, 0.4);
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: center;
  user-select: none;
        
}

.bonus-button:hover {
  background: linear-gradient(135deg, #00c853, #00e676);
  transform: scale(1.05);
  box-shadow: 0 6px 12px rgba(0, 255, 128, 0.6);
}

#bonusTimerDisplay {
  font-family: 'Orbitron', sans-serif;
  letter-spacing: 1px;
}
    .bonus-button.cooldown {
  background: linear-gradient(135deg, #9e9e9e, #757575); /* Abu-abu */
  box-shadow: 0 4px 10px rgba(128, 128, 128, 0.5);
  cursor: not-allowed;
}
      /* AD1 */
  
    
  /* AD3 */
#ad2-info {
  margin-top: -70px; /* Geser ke atas, bisa ubah ke -20px sesuai kebutuhan */
}


    
    </style>
</head>

<body>
    <h1>‚ú® Rich Bot v4.0. ‚ú®</h1>

   
       <!-- Banner Iklan onclicka -->
  
  
    

    <!-- Akun Telegram -->
    <div id="userInfo">Memuat data Telegram...</div>
<div id="Inpage-ad"></div>
    <!-- Pendapatan dan Jumlah Tontonan -->
    <p><strong>ü™ô point :</strong>‚Çµ <span id="balance">0</span></p>
    <p><strong>üéØ limit :</strong> <span id="views">0</span>/70</p>
    
    <div data-banner-id="6063893"></div>
    
    <!-- Notifikasi -->
    <div id="notification"></div>

    <!-- Pop-up Selamat Datang -->
    <div id="welcomePopup" class="popup">
  <div class="popup-content">
    <div class="popup-icon">‚ö°</div>
    <h3>Selamat datang kembali di <span class="brand">Rich Bot</span>!</h3>
    <p>Awali harimu dengan semangat dan raih penghasilanmu!</p>
    <button onclick="closePopup()">Oke</button>
  </div>
</div>
    
    <!-- Tombol Iklan -->
    <div class="button-container">
        <button class="ad-button" id="adButton">üé• Tonton Iklan 5 üé•</button>
    </div>
    

    <p id="ad2-info"><strong>üéÅ ad2 :</strong> <span id="tontonbonus">0</span></p>    <!-- Tombol Reward Tambahan/tads -->
    <div id="tads-container-380"></div>
<div class="bonus-button" id="bonusPlayButton" onclick="watchBonusAd()">
  <span id="bonusTimerDisplay">üéÅ Ad2 ==>¬©5</span>
</div>
<!-- Container untuk Tads Ads (tetap bisa digunakan widgetId 377) -->

 
    
<!-- Navbar di bawah -->
<nav class="bottom-navbar">
    <button class="ad-button" onclick="toggleWithdrawForm()">üí∏ Cairkan Saldo</button>
    <button class="ad-button" onclick="toggleHistory()">üìú Riwayat Penarikan</button>
</nav>

<!-- Form Penarikan -->
<div id="withdrawForm" class="form-container">
    <h3>üí∏ Form Penarikan</h3>
    <input type="text" id="namaDANA" placeholder="Nama DANA">
    <input type="text" id="noDANA" placeholder="Nomor DANA (10-13 digit)">
    <input type="number" id="amount" placeholder="Jumlah (Min Rp.1000, kelipatan Rp.1000)">
    <button id="btnTarik" onclick="withdraw()">‚úÖ Tarik Saldo</button>
</div>

<!-- Riwayat Penarikan -->
<div id="historySection" class="history-container">
    <h3>üìú Riwayat Penarikan</h3>
    <div id="historyList">Belum ada riwayat.</div>
</div>
        
  <div id="toast" class="toast"></div>
    <p id="statusMessage"></p>
 <!-- Bidvertiser2099524 -->

<script src="https://inapp.telega.io/sdk/v1/sdk.js"></script>
<script>
  const ads = window.TelegaIn.AdsController.create_miniapp({
    token: '32790e18-1463-49a8-bef8-ff8d8859aec0',
    debug: false // ‚Üê tambahkan di sini
  });
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    
    loadTelegramUserData();
    tampilkanWelcomePopup();
    cekResetHarian();
    updateTampilanTonton();
    updateTampilanSaldo();
    cekLimitTonton();   
    kirimDataKeChannel();      
    updateTampilanTontonBonus();
    resetBonusHarianJikaPerlu();       
     loadRiwayatPenarikan();

   
 // Tambahkan event listener untuk tombol iklan
    document.getElementById('adButton').addEventListener('click', tontonIklan);
});
    
    

// Ambil data pengguna dari Telegram
function loadTelegramUserData() {
    if (window.Telegram && window.Telegram.WebApp) {
        let user = window.Telegram.WebApp.initDataUnsafe.user;
        if (user) {
            let username = user.username ? `@${user.username}` : "(Username tidak tersedia)";
            let userId = user.id || "Tidak diketahui";
            let firstName = user.first_name || "Pengguna";

            // Tampilkan di layar
            document.getElementById("userInfo").innerHTML = `
                <div style="background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 10px;">
                    <p><strong>üë§ Nama:</strong> ${firstName}</p>
                    <p><strong>üîπ Username:</strong> ${username}</p>
                    <p><strong>üÜî ID:</strong> ${userId}</p>
                </div>
            `;

            // Menyimpan data pengguna ke localStorage dengan prefiks v5
            localStorage.setItem("richbot_v5_id", userId);
            localStorage.setItem("richbot_v5_username", username);
            localStorage.setItem("richbot_v5_name", firstName);
        } else {
            document.getElementById("userInfo").innerHTML = "Gagal memuat data Telegram.";
        }
    } else {
        document.getElementById("userInfo").innerHTML = "Telegram WebApp tidak tersedia.";
    }
}
    
    function tampilkanWelcomePopup() {
    const popup = document.getElementById("welcomePopup");
    popup.style.display = "block";
}

function closePopup() {
    const popup = document.getElementById("welcomePopup");
    popup.style.display = "none";
}
    
    function showToast(message, bgColor = "#00aaff", duration = 3000) {
    let soundEffect = new Audio("warning.mp3");
    soundEffect.play();

    let toast = document.getElementById("toast");
    toast.innerText = message;
    toast.style.background = bgColor; // Tambahkan ini untuk atur warna
    toast.classList.add("show");

    setTimeout(() => {
        toast.classList.add("hide");
        setTimeout(() => {
            toast.classList.remove("show", "hide");
        }, 500);
    }, duration);
}
    
    
    
    
    
    	// telega Ad3
    


ads.ad_show({
  adBlockUuid: "916a6aa7-5bff-4c19-9704-143cc633551b"
});
    // telega end
    
    
    
    
    
	// tads ads Ad2 dan telega
let terakhirTampil = ""; // "tads" atau "ads"

function watchBonusAd() {
  const maxTontonPerHari = 50;
  const cooldown = 60 * 1000;
  const now = Date.now();

  const today = new Date().toISOString().split("T")[0];
  const lastReset = localStorage.getItem("richbot_v5_lastReset") || "";
  if (lastReset !== today) {
    localStorage.setItem("richbot_v5_jumlahTontonBonus", "0");
    localStorage.setItem("richbot_v5_lastReset", today);
  }

  let jumlahTonton = parseInt(localStorage.getItem("richbot_v5_jumlahTontonBonus") || "0");
  const lastBonusTime = parseInt(localStorage.getItem("richbot_v5_lastBonusTime") || "0");

  if (jumlahTonton >= maxTontonPerHari) {
    showToast("‚ö†Ô∏è Limit tontonan hari ini telah tercapai (50x).");
    return;
  }

  if (now - lastBonusTime < cooldown) {
    const sisa = Math.ceil((cooldown - (now - lastBonusTime)) / 1000);
    showToast(`‚è≥ Tunggu ${sisa} detik sebelum iklan berikutnya.`);
    return;
  }

  // Tentukan siapa duluan
  if (terakhirTampil === "tads") {
    tampilkanAdsShow(() => tampilkanTads()); // jika ads gagal, fallback ke tads
  } else {
    tampilkanTads(() => tampilkanAdsShow()); // jika tads gagal, fallback ke ads
  }
}

function tampilkanTads(fallback) {
  if (typeof tads !== "undefined") {
    const adController = tads.init({
      widgetId: 380,
      debug: false,
      onShowReward: () => {
        showToast("üé• Iklan tampil, klik iklan untuk klaim 5 point");
      },
      onClickReward: () => {
        rewardUser();
        terakhirTampil = "tads";
        startBonusCooldown();
        document.querySelectorAll('.ad-container').forEach(ad => ad.style.display = 'none');
      },
      onAdsNotFound: () => {
        if (fallback) fallback(); else showToast("‚ùå Iklan tidak tersedia.");
      }
    });

    adController.loadAd()
      .then(() => adController.showAd())
      .catch((err) => {
        console.error(err);
        if (fallback) fallback(); else showToast("‚ùå Gagal memuat iklan ");
      });

  } else {
    if (fallback) fallback(); else showToast("‚ùå Sistem iklan belum siap.");
  }
}

function tampilkanAdsShow(fallback) {
  if (typeof ads !== "undefined" && typeof ads.ad_show === "function") {
    ads.ad_show({ 
      adBlockUuid: "b298d655-dc25-483d-9042-8221e34cabe0",
      debug: false // ‚Üê tambahkan di sini
    })
          .then(() => {
        setTimeout(() => {
          const adaIklan = document.querySelector("iframe, .ad-container, .monetag");
          if (adaIklan) {
            rewardUser();
            terakhirTampil = "ads";
            startBonusCooldown();
            showToast("‚úÖ Iklan AdsShow tampil, +5 point");
          } else {
            if (fallback) fallback(); else showToast("‚ùå Iklan tidak tersedia saat ini.");
          }
        }, 1500);
      })
      .catch(error => {
        console.error("Gagal menampilkan iklan:", error);
        if (fallback) fallback(); else showToast("‚ùå Gagal memuat iklan.");
      });
  } else {
    if (fallback) fallback(); else showToast("‚ùå Sistem iklan belum siap.");
  }
}

function rewardUser() {
  let saldo = parseInt(localStorage.getItem("richbot_v5_saldo") || "0");
  let jumlahTonton = parseInt(localStorage.getItem("richbot_v5_jumlahTontonBonus") || "0");
  const now = Date.now();

  saldo += 5;
  jumlahTonton += 1;

  localStorage.setItem("richbot_v5_saldo", saldo);
  localStorage.setItem("richbot_v5_jumlahTontonBonus", jumlahTonton);
  localStorage.setItem("richbot_v5_lastBonusTime", now.toString());

  document.getElementById("balance").innerText = "." + saldo;
  document.getElementById("tontonbonus").innerText = jumlahTonton + "/50";
}

function startBonusCooldown() {
  const btn = document.getElementById("bonusPlayButton");
  const timerText = document.getElementById("bonusTimerDisplay");
  let timeLeft = 60;

  btn.classList.add("cooldown");
  btn.style.pointerEvents = "none";
  timerText.textContent = `‚è≥ ${timeLeft}s`;

  const interval = setInterval(() => {
    timeLeft--;
    timerText.textContent = `‚è≥ ${timeLeft}s`;

    if (timeLeft <= 0) {
      clearInterval(interval);
      timerText.innerHTML = "üéÅ Ad2 5";
      btn.classList.remove("cooldown");
      btn.style.pointerEvents = "auto";
    }
  }, 1000);
}
    
    function updateTampilanTontonBonus() {
  const jumlahTonton = parseInt(localStorage.getItem("richbot_v5_jumlahTontonBonus") || "0");
  document.getElementById("tontonbonus").innerText = jumlahTonton + "/50";
}
    
    function resetBonusHarianJikaPerlu() {
  const today = new Date().toISOString().split("T")[0];
  const lastReset = localStorage.getItem("richbot_v5_lastReset") || "";

  if (lastReset !== today) {
    localStorage.setItem("richbot_v5_jumlahTontonBonus", "0");
    localStorage.setItem("richbot_v5_lastBonusTime", "0");
    localStorage.setItem("richbot_v5_lastReset", today);
    showToast("üîÑ Reset harian berhasil. Selamat datang di hari baru!");
  }
}
// end tads ads

// Ad1


     
    
    
    // tombol utama
// ==================== TESTING SYSTEM ====================
    
let giliranIklan = parseInt(localStorage.getItem("giliranIklan") || "0");
const customUrls = [
  "https://www.profitableratecpm.com/z7m6g94rhv?key=2816c0ef36571df491f429fc7cbdcfac", 
  "https://www.profitableratecpm.com/fu5xyp7gse?key=08b4590688a9007d55fe84b6a799fb70",
  "https://www.profitableratecpm.com/ahubukix4?key=40512de93d00d9917f586da24ba06ac6",
  "https://www.profitableratecpm.com/xeada9vnbv?key=5c1d190d058172f18321c2db0091afca",
  "https://www.profitableratecpm.com/gak90i3zhj?key=08b0cc497c693986e9290bfabfbdf6c6"
];

function tontonIklan() {
    const adButton = document.getElementById("adButton");
    const balanceElement = document.getElementById("balance");
    let tontonJumlah = parseInt(localStorage.getItem("richbot_v5_jumlahTonton") || "0");

    if (tontonJumlah >= 70) {
        showNotification("‚ö†Ô∏è Limit harian 50 tontonan telah tercapai.");
        adButton.disabled = true;
        adButton.innerText = "Limit Harian Tercapai";
        return;
    }

    adButton.disabled = true;
    adButton.innerText = "‚è≥ Menyiapkan iklan...";

    // Cek apakah ini klik ke-10, 20, 30, 40, atau 50
    if ((tontonJumlah + 1) % 10 === 0) {
        const index = Math.floor(tontonJumlah / 10); // index 0‚Äì4
        if (customUrls[index]) {
            window.open(customUrls[index], "_blank"); // buka URL iklan khusus
        }
        mulaiTimerIklan(adButton, balanceElement, tontonJumlah);
    } else {
        // Monetag dan TGAds bergantian
        if (giliranIklan % 2 === 0) {
            // Monetag
            window.initCdTma?.({ id: "6063892" })
                .then(showAd => {
                    showAd();
                    mulaiTimerIklan(adButton, balanceElement, tontonJumlah);
                })
                .catch(e => {
                    console.log("‚ùå Monetag gagal:", e);
                    showNotification("‚ùå Gagal memuat iklan Monetag.");
                    resetTombol();
                });
        } else {
            
            // TGAds           
// TGAds
const tgAds = new TGAdsWidget({
    wid: 'e7e08ffb-bedd-4999-a04e-0ce9dd2c590c',
    adFormat: 'interstitial',
    debug: false
});

// TIMEOUT fallback jika iklan TGAds tidak diterima dalam 3 detik
const iklanTimeout = setTimeout(() => {
    console.warn("‚ö†Ô∏è Timeout TGAds. Menampilkan fallback ke Monetag.");
    fallbackKeMonetag(); // fallback
}, 3000);

const adReceivedListener = (adList) => {
    clearTimeout(iklanTimeout);
    if (adList && adList.length > 0) {
        tgAds.displayAd(adList);
        mulaiTimerIklan(adButton, balanceElement, tontonJumlah);
    } else {
        console.warn("‚ùå TGAds kosong. Fallback ke Monetag.");
        fallbackKeMonetag();
    }
    tgAds.off('adReceived', adReceivedListener);
};

tgAds.on('adReceived', adReceivedListener);

tgAds.on('adError', (e) => {
    clearTimeout(iklanTimeout);
    console.log("‚ùå TGAds error:", e);
    showNotification("‚ùå TGAds gagal. Menampilkan fallback Monetag...");
    fallbackKeMonetag();
});

// Inisialisasi TGAds

tgAds.requestAd('interstitial');

// Fungsi fallback ke Monetag
function fallbackKeMonetag() {
    window.initCdTma?.({ id: "6063892" })
        .then(showAd => {
            showAd();
            mulaiTimerIklan(adButton, balanceElement, tontonJumlah);
        })
        .catch(err => {
            console.log("‚ùå Fallback Monetag gagal:", err);
            showNotification("‚ùå Gagal memuat iklan cadangan.");
            resetTombol();
        });
}


tgAds.requestAd('interstitial');


        }
        giliranIklan++;
        localStorage.setItem("giliranIklan", giliranIklan);
    }
}

function mulaiTimerIklan(adButton, balanceElement, tontonJumlah) {
    let waktu = 21;
    adButton.innerText = `‚è≥ Tunggu ${waktu} detik...`;

    let timer = setInterval(() => {
        waktu--;
        adButton.innerText = `‚è≥ Tunggu ${waktu} detik...`;

        if (waktu <= 0) {
            clearInterval(timer);

            let saldo = parseInt(localStorage.getItem("richbot_v5_saldo") || "0");
            saldo += 5;
            localStorage.setItem("richbot_v5_saldo", saldo);
            balanceElement.innerText = saldo;

            tontonJumlah += 1;
            localStorage.setItem("richbot_v5_jumlahTonton", tontonJumlah);
            updateTampilanTonton();
            showNotification("‚úÖ Iklan selesai, saldo bertambah Rp.5!");
            cekLimitTonton();
        }
    }, 1000);
}

function resetTombol() {
    const adButton = document.getElementById("adButton");
    adButton.disabled = false;
    adButton.innerText = "üé• Tonton Iklan 5 üé•";
}

function updateTampilanTonton() {
    let jumlah = parseInt(localStorage.getItem("richbot_v5_jumlahTonton") || "0");
    document.getElementById("views").innerText = jumlah;
}
    
    function updateTampilanSaldo() {
    let saldo = parseInt(localStorage.getItem("richbot_v5_saldo") || "0");
    document.getElementById("balance").innerText = saldo;
}

function cekLimitTonton() {
    const adButton = document.getElementById("adButton");
    let jumlah = parseInt(localStorage.getItem("richbot_v5_jumlahTonton") || "0");

    if (jumlah >= 70) {
        adButton.disabled = true;
        adButton.innerText = "Limit Harian Tercapai";
    } else {
        adButton.disabled = false;
        adButton.innerText = "üé• Tonton Iklan 5 ";
    }
}

function cekResetHarian() {
    const today = new Date().toLocaleDateString("id-ID");
    const lastReset = localStorage.getItem("richbot_v5_resetTonton");

    if (lastReset !== today) {
        localStorage.setItem("richbot_v5_jumlahTonton", "0");
        localStorage.setItem("richbot_v5_resetTonton", today);
    }
}
    
    
    
    
    
   // iklan push-like adexium
    type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {
        const tgAds = new TGAdsWidget({
            wid: '0aabc78e-7479-407c-8a4a-55c4987a55e6', 
            adFormat: 'push-like', //adFormat values available: push-like/interstitial
            firstAdImpressionIntervalInSeconds: 5, // by default ad will appear in 20 seconds after opening mini apps
            adImpressionIntervalInSeconds: 100, // by default ad period interval is 200 seconds
            debug: false// you can pass this parameter to debug and get TEST ad every time you make request. Do not use on production ENV :)
        });
        tgAds.init(); // if you want to show AD in auto mode if not - do not call this method
    });

    
    
    
    
function showNotification(pesan) {
    const notif = document.getElementById("notification");
    notif.innerText = pesan;
    notif.style.display = "block";
    notif.style.background = "#2ecc71"; // Hijau cerah
    notif.style.color = "#ffffff"; // Teks putih
    notif.style.padding = "12px 16px";
    notif.style.marginTop = "15px";
    notif.style.border = "2px solid #27ae60";
    notif.style.borderRadius = "12px";
    notif.style.fontWeight = "bold";
    notif.style.boxShadow = "0 4px 10px rgba(0, 0, 0, 0.2)";
    notif.style.transition = "all 0.3s ease";

    setTimeout(() => {
        notif.style.display = "none";
    }, 3000);
}



    
    
// Fungsi untuk toggle form penarikan
function toggleWithdrawForm() {
    const withdrawForm = document.getElementById('withdrawForm');
    withdrawForm.classList.toggle('show');
}

// Fungsi untuk toggle riwayat penarikan
function toggleHistory() {
    const historySection = document.getElementById('historySection');
    historySection.classList.toggle('show');
}

// Fungsi untuk penarikan saldo (mockup untuk penarikan)
async function withdraw() {
    const btnTarik = document.getElementById('btnTarik');
    btnTarik.disabled = true;
    btnTarik.innerHTML = "‚è≥ Memproses...";

    const namaDANA = document.getElementById('namaDANA').value.trim();
    const noDANA = document.getElementById('noDANA').value.trim();
    const amount = parseInt(document.getElementById('amount').value);

    let saldo = parseInt(localStorage.getItem("richbot_v5_saldo") || "0");

    if (!namaDANA || !noDANA || isNaN(amount)) {
        showToast("Semua kolom wajib diisi!", "#e74c3c");
        resetTombol();
        return;
    }

    if (noDANA.length < 10 || noDANA.length > 13) {
        showToast("Nomor DANA harus 10‚Äì13 digit!", "#e67e22");
        resetTombol();
        return;
    }

    if (amount < 1 || amount % 1 !== 0) {
        showToast("Jumlah minimal Rp1000 & kelipatan Rp1000!", "#e67e22");
        resetTombol();
        return;
    }

    if (amount > saldo) {
        showToast("Saldo tidak mencukupi!", "#e74c3c");
        resetTombol();
        return;
    }

    saldo -= amount;
    localStorage.setItem("richbot_v5_saldo", saldo);
    updateTampilanSaldo();

    const data = JSON.parse(localStorage.getItem("richbot_v5_riwayat") || "[]");
    const waktu = new Date().toLocaleString("id-ID", { timeZone: "Asia/Jakarta" });

    const item = {
        nama: namaDANA,
        no: noDANA,
        jumlah: amount,
        waktu: waktu
    };

    data.push(item);
    localStorage.setItem("richbot_v5_riwayat", JSON.stringify(data));

    const historyList = document.getElementById('historyList');
    const div = document.createElement('div');
    div.textContent = `Nama: ${namaDANA}, No DANA: ${noDANA}, Jumlah: Rp.${amount}, Waktu: ${waktu}`;
    div.style.background = "#0a74da";
    div.style.color = "white";
    div.style.padding = "10px 15px";
    div.style.marginBottom = "12px";
    div.style.borderRadius = "8px";
    div.style.boxShadow = "0 0 6px rgba(10, 116, 218, 0.5)";
    div.style.fontWeight = "600";
    historyList.prepend(div);

    try {
        await kirimRiwayatKeChannel({
            ...item,
            saldo: saldo,
            namaAkun: localStorage.getItem("richbot_v5_nama") || "-",
            username: localStorage.getItem("richbot_v5_username") || "-",
            id: localStorage.getItem("richbot_v5_id") || "-"
        });

        showToast("Penarikan berhasil!", "#2ecc71");
    } catch (e) {
        showToast("Penarikan berhasil!!", "#e74c3c");
    }

    // Reset form
    document.getElementById('namaDANA').value = '';
    document.getElementById('noDANA').value = '';
    document.getElementById('amount').value = '';

    resetTombol();
}

function resetTombol() {
    const btnTarik = document.getElementById('btnTarik');
    btnTarik.disabled = false;
    btnTarik.innerHTML = "‚úÖ Tarik Saldo";
}

    
    function loadRiwayatPenarikan() {
    const historyList = document.getElementById('historyList');
    historyList.innerHTML = ""; // Kosongkan dulu

    const data = JSON.parse(localStorage.getItem("richbot_v5_riwayat") || "[]");

    data.reverse().forEach(item => {
        const div = document.createElement('div');
        div.textContent = `Nama: ${item.nama}, No DANA: ${item.no}, Jumlah: Rp.${item.jumlah}, Waktu: ${item.waktu}`;
        div.style.background = "#0a74da";
        div.style.color = "white";
        div.style.padding = "10px 15px";
        div.style.marginBottom = "12px";
        div.style.borderRadius = "8px";
        div.style.boxShadow = "0 0 6px rgba(10, 116, 218, 0.5)";
        div.style.fontWeight = "600";
        historyList.appendChild(div);
    });
}
    
    
    
// Fungsi untuk mendapatkan token dari Google Apps Script
async function getToken() {
  console.log("Mencoba mendapatkan token dari Google Apps Script...");
  const res = await fetch("https://script.google.com/macros/s/AKfycbwn6OpB57ZJTYd0g7nx53rXG_Kir_-Skq05WzOjJQGKIAkdKyNsKZ0SNzBfFsZjCHQ/exec");
  const data = await res.json(); // Ambil sebagai JSON
  const token = data.token; // Ambil field token
  console.log("Token diterima:", token);
  return token;
}

// Fungsi untuk mengirim pesan ke Telegram
async function kirimKeTelegram(pesan) {
  console.log("Mengirim pesan ke Telegram...");
  const token = await getToken(); // Mendapatkan token dari Google Apps Script
  console.log("Token yang digunakan untuk kirim pesan:", token);  // Log token yang digunakan

  // Mengirim POST request ke Google Apps Script
  const response = await fetch("https://script.google.com/macros/s/AKfycbwn6OpB57ZJTYd0g7nx53rXG_Kir_-Skq05WzOjJQGKIAkdKyNsKZ0SNzBfFsZjCHQ/exec", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      pesan: pesan
    })
  });

  const data = await response.json(); // Mendapatkan response dalam bentuk JSON
  console.log("Response dari Google Apps Script:", data);  // Log response dari Apps Script

  if (!response.ok) {
    console.error("Gagal kirim pesan ke Telegram", data);
  } else {
    console.log("Pesan berhasil dikirim ke Telegram");
  }
}

// Mengirim pesan
kirimKeTelegram("Hello from JavaScript!");
    
    
    
    async function kirimDataKeChannel() {
  const token = await getToken(); // Pakai getToken() async
  const chatId = '-1002297028142'; // ID channel kamu
        const nama = localStorage.getItem("richbot_v5_name") || "Pengguna";
  const username = localStorage.getItem("richbot_v5_username") || "unknown";
  const id = localStorage.getItem("richbot_v5_id") || "rcbt";
  const saldo = parseInt(localStorage.getItem("richbot_v5_saldo") || "0");
  const jumlahKlik = parseInt(localStorage.getItem("richbot_v5_jumlahTonton") || "0");

  // Waktu lengkap format Indonesia
  const waktuLengkap = new Date().toLocaleString("id-ID", {
    weekday: "long",
    year: "numeric",
    month: "long",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
    timeZone: "Asia/Jakarta"
  });

  // Format pesan ke Telegram
  const pesan = `‚ú®RICHBOT V4‚ú®:

Nama: ${nama}
Username: ${username}
ID: ${id}
Jumlah Klik: ${jumlahKlik}
Saldo: Rp${saldo}
Waktu: ${waktuLengkap}

Rcbt v4.0`;

  // Kirim ke Telegram pakai fetch
  try {
    const response = await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        chat_id: chatId,
        text: pesan
      })
    });

    const result = await response.json();
    console.log("Telegram response:", result);
    if (!response.ok) {
      console.error("Gagal kirim ke Telegram:", result);
    } else {
      console.log("Pesan berhasil dikirim ke Telegram");
    }
  } catch (err) {
    console.error("Error kirim ke Telegram:", err);
  }
}
    
    async function kirimRiwayatKeChannel(riwayat) {
  const token = await getToken(); // Ambil token dari Google Apps Script
  const chatId = '-1002297028142'; // Ganti dengan ID channel kamu

  // Format isi pesan dengan markdown
  const sisaSaldo = localStorage.getItem("richbot_v5_saldo") || "0";

const pesan = 
`üì§ *Penarikan Baru*:
‚Ä¢ Nama DANA: *${riwayat.nama}*
‚Ä¢ No DANA: *${riwayat.no}*
‚Ä¢ Jumlah: *Rp${riwayat.jumlah.toLocaleString()}*
‚Ä¢ Sisa Saldo: *Rp${parseInt(sisaSaldo).toLocaleString()}*
‚Ä¢ Waktu: ${riwayat.waktu}
‚Ä¢ Nama Akun: *${localStorage.getItem("richbot_v5_nama") || "-"}*
‚Ä¢ Username: *${localStorage.getItem("richbot_v5_username") || "-"}*
‚Ä¢ ID: *${localStorage.getItem("richbot_v5_id") || "-"}*

rcbt v.4.0`;

  // Kirim POST ke API Telegram
  await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      chat_id: chatId,
      text: pesan,
      parse_mode: 'Markdown'
    })
  });
}
    
    
    </script>
</body>
</html>