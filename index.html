<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rich Bot v4.0 - Telegram & RichAds</title>

    <!-- Telegram WebApp & RichAds SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <script src="https://js.onclckvd.com/in-stream-ad-admanager/tma.js"></script>
    <script src="https://w.tads.me/widget.js"></script>
    <script data-onclicka-banner="6063893" async src="https://js.onclckmn.com/banner-admanager/oncbanner.m.js" data-onclicka-banner-ar="c"></script>
    <script async src="https://js.onclckmn.com/static/onclicka.js" data-admpid="307071"></script>
    
    
    <style>
        body {
    font-family: 'Arial', sans-serif;
    background: linear-gradient(to right, #4e54c8, #8f94fb);
    color: #fff;
    text-align: center;
    padding: 20px;
    margin: 0;
    min-height: 100vh;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}

.main-container {
    flex: 1;
    overflow-y: auto;
    max-height: calc(100vh - 120px); /* Sesuaikan dengan kebutuhan */
    padding-bottom: 20px;
}

h1 {
    font-size: clamp(1.5em, 5vw, 2em); /* Responsif */
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    position: sticky;
    top: 0;
    background: linear-gradient(to right, #4e54c8, #8f94fb);
    padding: 10px 0;
    z-index: 10;
}

.button-container {
    margin: 20px 0;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.ad-button {
    padding: 15px 30px;
    font-size: clamp(14px, 4vw, 18px); /* Responsif */
    color: white;
    background: linear-gradient(45deg, #ff416c, #ff4b2b);
    border: none;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    margin: 0 auto;
    width: 90%;
    max-width: 300px;
}

.footer {
    position: sticky;
    bottom: 0;
    background: linear-gradient(to right, #4e54c8, #8f94fb);
    padding: 10px 0;
    z-index: 10;
}
       
/* Navbar bawah */
/* Navbar Bawah */
.bottom-navbar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-around;
    padding: 10px 5px;
    background: linear-gradient(to right, #4e54c8, #8f94fb);
    box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
    z-index: 1000;
}

.bottom-navbar .ad-button {
    padding: 8px 12px;
    font-size: 12px;
    margin: 0 3px;
    flex: 1;
    max-width: 48%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Tombol Utama */
.button-container {
    margin: 15px 0;
    padding-bottom: 70px; /* Ruang untuk navbar bawah */
}

/* Responsive Adjustments */
@media (max-width: 400px) {
    .bottom-navbar .ad-button {
        font-size: 11px;
        padding: 6px 8px;
    }
    
    #info, .bonus-button {
        font-size: 14px;
    }
}

/* Form Styling */
.form-container {
    display: none;
    background-color: #f4f4f4;
    padding: 20px;
    border-radius: 8px;
    margin: 20px;
    margin-bottom: 80px; /* Supaya tidak ketutupan navbar */
}

.form-container input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 4px;
    border: 1px solid #ccc;
}

.form-container button {
    padding: 12px 24px;
    font-size: 16px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

/* Riwayat Penarikan Styling */
.history-container {
    display: none;
    background-color: #f4f4f4;
    padding: 20px;
    border-radius: 8px;
    margin: 20px;
    margin-bottom: 80px; /* Supaya tidak ketutupan navbar */
}

#historyList {
    background-color: #fff;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    min-height: 50px;
}

/* Show form and history on button click */
.show {
    display: block;
}
/* end navbar */
    
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            z-index: 9999;
        }

        .popup {
            position: fixed;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #4CAF50, #2E8B57);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 9999;
            text-align: center;
            display: none;
        }

        .popup button {
            background: #ffffff;
            color: #2E8B57;
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
        }
    
      
    
    .toast {
    visibility: hidden;
    min-width: 250px;
    background: rgba(0, 170, 255, 1); /* Warna biru cyan dengan transparansi */
    color: white;
    text-align: center;
    border-radius: 8px;
    padding: 12px 20px;
    position: fixed;
    left: 50%;
    top: 30px;
    transform: translateX(-50%);
    z-index: 1000;
    font-size: 16px;
    font-weight: bold;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
    box-shadow: 0 0 10px rgba(0, 170, 255, 0.6), inset 0 0 8px rgba(0, 170, 255, 0.4);
    transition: all 2s ease-in-out;
    animation: pulse 4s infinite alternate;
}

/* Efek Glow Lebih Halus */
@keyframes pulse {
    from {
        box-shadow: 0 0 8px rgba(0, 170, 255, 0.5);
    }
    to {
        box-shadow: 0 0 15px rgba(0, 170, 255, 0.7);
    }
}

/* Efek Muncul & Hilang */
.toast.show {
    visibility: visible;
    top: 70px;
    opacity: 1;
}

.toast.hide {
    top: 30px;
    opacity: 0;
}
    
    .bonus-button {
  display: inline-block;
  background: linear-gradient(135deg, #00e676, #00c853);
  color: #fff;
  padding: 12px 24px;
  font-size: 18px;
  font-weight: bold;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 255, 128, 0.4);
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: center;
  user-select: none;
}

.bonus-button:hover {
  background: linear-gradient(135deg, #00c853, #00e676);
  transform: scale(1.05);
  box-shadow: 0 6px 12px rgba(0, 255, 128, 0.6);
}

#bonusTimerDisplay {
  font-family: 'Orbitron', sans-serif;
  letter-spacing: 1px;
}
    .bonus-button.cooldown {
  background: linear-gradient(135deg, #9e9e9e, #757575); /* Abu-abu */
  box-shadow: 0 4px 10px rgba(128, 128, 128, 0.5);
  cursor: not-allowed;
}
    
    #redirectButton {
      padding: 12px 24px;
      font-size: 18px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin: 15px;
      transition: background 0.3s;
    }
    #redirectButton:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    #info {
      font-family: Arial, sans-serif;
      font-size: 14px;
      margin-top: 10px;
      color: #333;
    }
    
    </style>
</head>

<body>
    <h1>‚ú® Rich Bot v4.0. ‚ú®</h1>

    <!-- Banner Iklan -->
      <div data-banner="6063893"></div>
    

    <!-- Akun Telegram -->
    <div id="userInfo">Memuat data Telegram...</div>

    <!-- Pendapatan dan Jumlah Tontonan -->
    <p><strong>ü™ô point :</strong>‚Çµ <span id="balance">0</span></p>
    <p><strong>üéØ limit :</strong> <span id="views">0</span>/50</p>
    <p><strong>üéÅ ad2 :</strong> <span id="tontonbonus">0</span></p>

    <!-- Notifikasi -->
    <div id="notification"></div>

    <!-- Pop-up Selamat Datang -->
    <div id="welcomePopup" class="popup">
        ‚úÖ Selamat datang kembali di Rich Bot!
        <button onclick="closePopup()">Oke</button>
    </div>

    <!-- Tombol Iklan -->
    <div class="button-container">
        <button class="ad-button" id="adButton">üé• Tonton Iklan 5 üé•</button>
    </div>
    
<center>
     <div id="info">üíé Klik: 0/5</div>
  <button id="redirectButton">Ad1 5</button> 
</center>
    
    <!-- Tombol Reward Tambahan/tads -->
    <div id="tads-container-380"></div>
<div class="bonus-button" id="bonusPlayButton" onclick="watchBonusAd()">
  <span id="bonusTimerDisplay">üéÅ Ad2 5</span>
</div>
<!-- Container untuk Tads Ads (tetap bisa digunakan widgetId 377) -->

  <!--end tads -->
<!-- Tombol muncul dulu -->
    <button onclick="showAds()">Tampilkan Iklan</button>


  
    
<!-- Navbar di bawah -->
<nav class="bottom-navbar">
    <button class="ad-button" onclick="toggleWithdrawForm()">üí∏ Cairkan Saldo</button>
    <button class="ad-button" onclick="toggleHistory()">üìú Riwayat Penarikan</button>
</nav>

<!-- Form Penarikan -->
<div id="withdrawForm" class="form-container">
    <h3>üí∏ Form Penarikan</h3>
    <input type="text" id="namaDANA" placeholder="Nama DANA">
    <input type="text" id="noDANA" placeholder="Nomor DANA (10-13 digit)">
    <input type="number" id="amount" placeholder="Jumlah (Min Rp.1000, kelipatan Rp.1000)">
    <button onclick="withdraw()">‚úÖ Tarik Saldo</button>
</div>

<!-- Riwayat Penarikan -->
<div id="historySection" class="history-container">
    <h3>üìú Riwayat Penarikan</h3>
    <div id="historyList">Belum ada riwayat.</div>
</div>
        
  <div id="toast" class="toast"></div>
    <p id="statusMessage"></p>
 <!-- Bidvertiser2099524 -->

<script src="https://inapp.telega.io/sdk/v1/sdk.js"></script>
<script>
  const ads = window.TelegaIn.AdsController.create_miniapp({
    token: '32790e18-1463-49a8-bef8-ff8d8859aec0' });
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    loadTelegramUserData();
    
    cekResetHarian();
    updateTampilanTonton();
    updateTampilanSaldo();
    cekLimitTonton();
    tampilkanWelcomePopup();
    kirimDataKeChannel();      
    updateTampilanTontonBonus();
    updateButton();
    updateBalance();

 
 // Tambahkan event listener untuk tombol iklan
    document.getElementById('adButton').addEventListener('click', tontonIklan);
});

// Ambil data pengguna dari Telegram
function loadTelegramUserData() {
    if (window.Telegram && window.Telegram.WebApp) {
        let user = window.Telegram.WebApp.initDataUnsafe.user;
        if (user) {
            let username = user.username ? `@${user.username}` : "(Username tidak tersedia)";
            let userId = user.id || "Tidak diketahui";
            let firstName = user.first_name || "Pengguna";

            // Tampilkan di layar
            document.getElementById("userInfo").innerHTML = `
                <div style="background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 10px;">
                    <p><strong>üë§ Nama:</strong> ${firstName}</p>
                    <p><strong>üîπ Username:</strong> ${username}</p>
                    <p><strong>üÜî ID:</strong> ${userId}</p>
                </div>
            `;

            // Menyimpan data pengguna ke localStorage dengan prefiks v5
            localStorage.setItem("richbot_v5_id", userId);
            localStorage.setItem("richbot_v5_username", username);
            localStorage.setItem("richbot_v5_name", firstName);
        } else {
            document.getElementById("userInfo").innerHTML = "Gagal memuat data Telegram.";
        }
    } else {
        document.getElementById("userInfo").innerHTML = "Telegram WebApp tidak tersedia.";
    }
}
    
    

function showAds() {
    if (!ads) {
        showToast("Iklan belum siap. Coba lagi sebentar."); 
        return;
    }
    ads.ad_show({
        adBlockUuid: "b298d655-dc25-483d-9042-8221e34cabe0"
    }).catch(error => {
        console.log("Gagal menampilkan iklan:", error);
        showToast("Gagal menampilkan iklan. Pastikan dibuka di Telegram.");
    });
}

    
    function showToast(message, duration = 3000) {
    let soundEffect = new Audio("warning.mp3"); // Muat file suara
    soundEffect.play(); // Putar suara saat roulette dibuka

    let toast = document.getElementById("toast");
    toast.innerText = message;
    toast.classList.add("show");

    setTimeout(() => {
        toast.classList.add("hide");
        setTimeout(() => {
            toast.classList.remove("show", "hide");
        }, 500);
    }, duration);
}
    
	// tads ads
function watchBonusAd() {
  const maxTontonPerHari = 50;
  const cooldown = 60 * 1000; // 1 menit
  const now = Date.now();

  // Reset harian jika tanggal berubah
  const today = new Date().toISOString().split("T")[0];
  const lastReset = localStorage.getItem("richbot_v5_lastReset") || "";
  if (lastReset !== today) {
    localStorage.setItem("richbot_v5_jumlahTontonBonus", "0");
    localStorage.setItem("richbot_v5_lastReset", today);
  }

  // Ambil data terbaru setelah kemungkinan reset
  let jumlahTonton = parseInt(localStorage.getItem("richbot_v5_jumlahTontonBonus") || "0");
  const lastBonusTime = parseInt(localStorage.getItem("richbot_v5_lastBonusTime") || "0");

  // Cek limit harian
  if (jumlahTonton >= maxTontonPerHari) {
    showToast("‚ö†Ô∏è Limit tontonan hari ini telah tercapai (50x).");
    return;
  }

  // Cek cooldown
  if (now - lastBonusTime < cooldown) {
    const sisa = Math.ceil((cooldown - (now - lastBonusTime)) / 1000);
    showToast(`‚è≥ Tunggu ${sisa} detik sebelum iklan berikutnya.`);
    return;
  }

  // Kalau tads tersedia, tampilkan iklan
  if (typeof tads !== "undefined") {
    const adController = window.tads.init({
      widgetId: 380,
      debug: false,
      onShowReward: (adId) => {
        showToast("üé• Iklan tampil, klik iklan untuk klaim 5 point");
      },
      onClickReward: (adId) => {
        // Tambah saldo dan jumlah tonton
        let saldo = parseInt(localStorage.getItem("richbot_v5_saldo") || "0");
        saldo += 5;
        jumlahTonton += 1;

        localStorage.setItem("richbot_v5_saldo", saldo);
        localStorage.setItem("richbot_v5_jumlahTontonBonus", jumlahTonton);
        localStorage.setItem("richbot_v5_lastBonusTime", now.toString());

        // Update tampilan
        document.getElementById("balance").innerText = "." + saldo;
        document.getElementById("tontonbonus").innerText = jumlahTonton + "/50";
          
        showToast("‚úÖ Iklan diklik, saldo bertambah 5 point");
        startBonusCooldown();

        // Sembunyikan kontainer iklan
        document.querySelectorAll('.ad-container').forEach(ad => ad.style.display = 'none');
      },
      onAdsNotFound: () => {
        showToast("‚ùå Iklan tidak tersedia saat ini.");
      }
    });

    adController.loadAd()
      .then(() => adController.showAd())
      .catch((err) => {
        console.error(err);
        showToast("‚ùå Gagal memuat iklan bonus.");
      });
  } else {
    showToast("‚ùå Sistem iklan belum siap.");
  }
}
    
    function startBonusCooldown() {
  const btn = document.getElementById("bonusPlayButton");
  const timerText = document.getElementById("bonusTimerDisplay");
  let timeLeft = 60;

  btn.classList.add("cooldown"); // Tambahkan class cooldown
  btn.style.pointerEvents = "none"; // Nonaktifkan klik
  timerText.textContent = `‚è≥ ${timeLeft}s`;

  const interval = setInterval(() => {
    timeLeft--;
    timerText.textContent = `‚è≥ ${timeLeft}s`;

    if (timeLeft <= 0) {
      clearInterval(interval);
      timerText.innerHTML = "üéÅ Ad2 5"; // Kembalikan teks awal
      btn.classList.remove("cooldown"); // Hapus class cooldown
      btn.style.pointerEvents = "auto"; // Aktifkan klik lagi
    }
  }, 1000);
}
    
    function updateTampilanTontonBonus() {
  const jumlahTonton = parseInt(localStorage.getItem("richbot_v5_jumlahTontonBonus") || "0");
  document.getElementById("tontonbonus").innerText = jumlahTonton + "/50";
}
// end tads ads


const links = [
    "https://www.profitableratecpm.com/z7m6g94rhv?key=2816c0ef36571df491f429fc7cbdcfac", 
    "https://www.profitableratecpm.com/fu5xyp7gse?key=08b4590688a9007d55fe84b6a799fb70"
  ];

  let clickCount = 0;
  const maxClicks = 5;
  let isWaiting = false;
  let timerInterval;
  let waitSeconds = 60;

  // Load click dan saldo dari localStorage
  if (localStorage.getItem('richbot_v5_clicks')) {
    clickCount = parseInt(localStorage.getItem('richbot_v5_clicks')) || 0;
  }

  if (!localStorage.getItem('richbot_v5_saldo')) {
    localStorage.setItem('richbot_v5_saldo', 0);
  }

  updateButton();
  updateBalance();

  document.getElementById('redirectButton').addEventListener('click', () => {
    if (clickCount >= maxClicks || isWaiting) return;

    const linkToOpen = links[clickCount % 2];
    window.open(linkToOpen, '_blank');

    clickCount++;
    localStorage.setItem('richbot_v5_clicks', clickCount);

    // Tambahkan 5 rupiah ke saldo
    let saldo = parseInt(localStorage.getItem('richbot_v5_saldo')) || 0;
    saldo += 5;
    localStorage.setItem('richbot_v5_saldo', saldo);
    updateBalance();

    updateButton(); // <--- Tambahkan ini di sini AGAR JUMLAH KLIK LANGSUNG UPDATE

    startCooldown();
});

  function startCooldown() {
    isWaiting = true;
    let remaining = waitSeconds;
    const button = document.getElementById('redirectButton');
    button.disabled = true;
    button.textContent = `Tunggu ${remaining}s`;

    timerInterval = setInterval(() => {
      remaining--;
      button.textContent = `Tunggu ${remaining}s`;

      if (remaining <= 0) {
        clearInterval(timerInterval);
        isWaiting = false;
        updateButton();
      }
    }, 1000);
  }

  function updateButton() {
    const button = document.getElementById('redirectButton');
    const info = document.getElementById('info');
    info.textContent = `üíéKlik: ${clickCount}/${maxClicks}`;

    if (clickCount >= maxClicks) {
      button.disabled = true;
      button.textContent = "Limit Harian Tercapai";
    } else if (!isWaiting) {
      button.disabled = false;
      button.textContent = "üíéAd1 5";
    }
  }

  function updateBalance() {
    const balance = localStorage.getItem('richbot_v5_saldo') || 0;
    document.getElementById('balance').textContent = balance;
  }

  // Reset otomatis setiap jam 00:00
  setInterval(() => {
    const now = new Date();
    console.log(`Cek waktu: ${now.getHours()}:${now.getMinutes()}`);  // Menampilkan jam dan menit setiap kali interval

    if (now.getHours() === 0 && now.getMinutes() === 0) {
        console.log("Reset harian ad1 dilakukan!");  // Menunjukkan kalau waktunya sudah 00:00

        // Reset klik dan status waiting
        localStorage.setItem('richbot_v5_clicks', 0);
        clickCount = 0;
        isWaiting = false;

        console.log("Klik dihitung ulang ad1: ", clickCount);  // Cek nilai clickCount setelah reset

        clearInterval(timerInterval);
        updateButton();
        console.log(" ad1 Tombol diupdate, akan reload halaman");

        location.reload(); // Reload halaman untuk memperbaharui semuanya
    } else {
        console.log("ad 1 Belum jam reset, cek lagi dalam 60 detik.");
    }
}, 60000);
    
function tontonIklan() {
    const adButton = document.getElementById("adButton");
    const balanceElement = document.getElementById("balance");
    let tontonJumlah = parseInt(localStorage.getItem("richbot_v5_jumlahTonton") || "0");

    if (tontonJumlah >= 50) {
        showNotification("‚ö†Ô∏è Limit harian 50 tontonan telah tercapai.");
        adButton.disabled = true;
        adButton.innerText = "Limit Harian Tercapai";
        return;
    }

    adButton.disabled = true;
    adButton.innerText = "‚è≥ Menyiapkan iklan...";

    window.initCdTma?.({ id: "6063892" })
        .then(showAd => {
            showAd();
            console.log("Iklan ditampilkan.");

            // Mulai hitung mundur 21 detik setelah iklan muncul
            let waktu = 21;
            adButton.innerText = `‚è≥ Tunggu ${waktu} detik...`;

            let timer = setInterval(() => {
                waktu--;
                adButton.innerText = `‚è≥ Tunggu ${waktu} detik...`;

                if (waktu <= 0) {
                    clearInterval(timer);

                    let saldo = parseInt(localStorage.getItem("richbot_v5_saldo") || "0");
                    saldo += 5;
                    localStorage.setItem("richbot_v5_saldo", saldo);
                    balanceElement.innerText = saldo;

                    tontonJumlah += 1;
                    localStorage.setItem("richbot_v5_jumlahTonton", tontonJumlah);
                    updateTampilanTonton();
                    showNotification("‚úÖ Iklan selesai, saldo bertambah Rp.5!");

                    cekLimitTonton();
                }
            }, 1000);
        })
        .catch(e => {
            console.log("Error initializing ad:", e);
            showNotification("‚ùå Gagal memuat iklan, silakan coba lagi.");
            adButton.disabled = false;
            adButton.innerText = "üé• Tonton Iklan 5 üé•";
        });
}

function updateTampilanTonton() {
    let jumlah = parseInt(localStorage.getItem("richbot_v5_jumlahTonton") || "0");
    document.getElementById("views").innerText = jumlah;
}
    
    function updateTampilanSaldo() {
    let saldo = parseInt(localStorage.getItem("richbot_v5_saldo") || "0");
    document.getElementById("balance").innerText = saldo;
}

function cekLimitTonton() {
    const adButton = document.getElementById("adButton");
    let jumlah = parseInt(localStorage.getItem("richbot_v5_jumlahTonton") || "0");

    if (jumlah >= 50) {
        adButton.disabled = true;
        adButton.innerText = "Limit Harian Tercapai";
    } else {
        adButton.disabled = false;
        adButton.innerText = "üé• Tonton Iklan 5 ";
    }
}

function cekResetHarian() {
    const today = new Date().toLocaleDateString("id-ID");
    const lastReset = localStorage.getItem("richbot_v5_resetTonton");

    if (lastReset !== today) {
        localStorage.setItem("richbot_v5_jumlahTonton", "0");
        localStorage.setItem("richbot_v5_resetTonton", today);
    }
}

function showNotification(pesan) {
    const notif = document.getElementById("notification");
    notif.innerText = pesan;
    notif.style.display = "block";
    notif.style.background = "#2ecc71"; // Hijau cerah
    notif.style.color = "#ffffff"; // Teks putih
    notif.style.padding = "12px 16px";
    notif.style.marginTop = "15px";
    notif.style.border = "2px solid #27ae60";
    notif.style.borderRadius = "12px";
    notif.style.fontWeight = "bold";
    notif.style.boxShadow = "0 4px 10px rgba(0, 0, 0, 0.2)";
    notif.style.transition = "all 0.3s ease";

    setTimeout(() => {
        notif.style.display = "none";
    }, 3000);
}

function tampilkanWelcomePopup() {
    const popup = document.getElementById("welcomePopup");
    popup.style.display = "block";
}

function closePopup() {
    const popup = document.getElementById("welcomePopup");
    popup.style.display = "none";
}

// Fungsi untuk toggle form penarikan
function toggleWithdrawForm() {
    const withdrawForm = document.getElementById('withdrawForm');
    withdrawForm.classList.toggle('show');
}

// Fungsi untuk toggle riwayat penarikan
function toggleHistory() {
    const historySection = document.getElementById('historySection');
    historySection.classList.toggle('show');
}

// Fungsi untuk penarikan saldo (mockup untuk penarikan)
function withdraw() {
    const namaDANA = document.getElementById('namaDANA').value;
    const noDANA = document.getElementById('noDANA').value;
    const amount = parseInt(document.getElementById('amount').value);

    if (!namaDANA || !noDANA || !amount || amount < 1000 || amount % 1000 !== 0) {
        alert("Harap lengkapi data dengan benar!");
        return;
    }

    // Simpan riwayat penarikan (contoh, menggunakan localStorage atau langsung di tampilkan)
    const historyList = document.getElementById('historyList');
    const historyItem = document.createElement('div');
    historyItem.textContent = `Nama: ${namaDANA}, No DANA: ${noDANA}, Jumlah: Rp.${amount}`;
    historyList.appendChild(historyItem);

    // Clear input fields after successful withdrawal
    document.getElementById('namaDANA').value = '';
    document.getElementById('noDANA').value = '';
    document.getElementById('amount').value = '';
}
    
// Fungsi untuk mendapatkan token dari Google Apps Script
async function getToken() {
  console.log("Mencoba mendapatkan token dari Google Apps Script...");
  const res = await fetch("https://script.google.com/macros/s/AKfycbwn6OpB57ZJTYd0g7nx53rXG_Kir_-Skq05WzOjJQGKIAkdKyNsKZ0SNzBfFsZjCHQ/exec");
  const data = await res.json(); // Ambil sebagai JSON
  const token = data.token; // Ambil field token
  console.log("Token diterima:", token);
  return token;
}

// Fungsi untuk mengirim pesan ke Telegram
async function kirimKeTelegram(pesan) {
  console.log("Mengirim pesan ke Telegram...");
  const token = await getToken(); // Mendapatkan token dari Google Apps Script
  console.log("Token yang digunakan untuk kirim pesan:", token);  // Log token yang digunakan

  // Mengirim POST request ke Google Apps Script
  const response = await fetch("https://script.google.com/macros/s/AKfycbwn6OpB57ZJTYd0g7nx53rXG_Kir_-Skq05WzOjJQGKIAkdKyNsKZ0SNzBfFsZjCHQ/exec", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      pesan: pesan
    })
  });

  const data = await response.json(); // Mendapatkan response dalam bentuk JSON
  console.log("Response dari Google Apps Script:", data);  // Log response dari Apps Script

  if (!response.ok) {
    console.error("Gagal kirim pesan ke Telegram", data);
  } else {
    console.log("Pesan berhasil dikirim ke Telegram");
  }
}

// Mengirim pesan
kirimKeTelegram("Hello from JavaScript!");
    
    
    
    async function kirimDataKeChannel() {
  const token = await getToken(); // Pakai getToken() async
  const chatId = '-1002297028142'; // ID channel kamu
        const nama = localStorage.getItem("richbot_v5_name") || "Pengguna";
  const username = localStorage.getItem("richbot_v5_username") || "unknown";
  const id = localStorage.getItem("richbot_v5_id") || "rcbt";
  const saldo = parseInt(localStorage.getItem("richbot_v5_saldo") || "0");
  const jumlahKlik = parseInt(localStorage.getItem("richbot_v5_jumlahTonton") || "0");

  // Waktu lengkap format Indonesia
  const waktuLengkap = new Date().toLocaleString("id-ID", {
    weekday: "long",
    year: "numeric",
    month: "long",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
    timeZone: "Asia/Jakarta"
  });

  // Format pesan ke Telegram
  const pesan = `Ada pengguna baru masuk bot:

Nama: ${nama}
Username: @${username}
ID: ${id}
Jumlah Klik: ${jumlahKlik}
Saldo: Rp${saldo}
Waktu: ${waktuLengkap}

Rcbt v4.0`;

  // Kirim ke Telegram pakai fetch
  try {
    const response = await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        chat_id: chatId,
        text: pesan
      })
    });

    const result = await response.json();
    console.log("Telegram response:", result);
    if (!response.ok) {
      console.error("Gagal kirim ke Telegram:", result);
    } else {
      console.log("Pesan berhasil dikirim ke Telegram");
    }
  } catch (err) {
    console.error("Error kirim ke Telegram:", err);
  }
}
    
    </script>
</body>
</html>